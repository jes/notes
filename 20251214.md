# 2025-12-14

## Tractor

I've connected up the Arduino etc. to the tractor and am trying to get it working.

https://img.incoherency.co.uk/6336

The good news is that smoothly ramping the throttle signal is working (although it may want a variable rate, it wants
to ramp slowly at lower throttle positions because it's more sensitive there).

The bad news is that as soon as you start driving, the signal from the hall effect sensor starts glitching,
see https://www.youtube.com/watch?v=GciPnvafAc0

So one idea is to add a capacitor to try to keep the power supply more stable.

Another idea is to work around it in software. Currently I'm saying that if the difference between the min and max value
of last 150ms is more than N then I say you're changing gear and I reset throttle output to 0.

But maybe I could say something like "if the median of the last 5 values is more than N away from the median of the 5 values 150ms ago",
then I'll cut the throttle signal? So then a spike shorter than 3 samples will get ignored?
