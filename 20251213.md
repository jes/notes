# 2025-12-13

## Tractor

https://img.incoherency.co.uk/6333

I'm working on putting some digital smoothing on the throttle pedal signal.

There are 2 components to this:

1. limit the rate of increase of the throttle pedal signal, to limit the jerk on acceleration
2. detect when the gear is changed and cut the throttle pedal, to prevent slamming into reverse at full power etc.

I'm going to detect when the gear is changed by putting a magnet on the gear selector and sensing it with an analogue hall sensor.
Any change in position fo the magnet should instantly reset throttle to 0 and allow ramping up again.

I wasn't exactly sure how the throttle signal worked but I had a good guess, I wired up a potentiometer across the wires
that go to the throttle pedal and it worked how I suspected:

https://img.incoherency.co.uk/6334

So now I just need a 3d-printed box that I can screw to the chassis that holds the Arduino and has the 3 cables coming into it (one to
the motor controller, one to the throttle pedal, one to the magnet sensor).

I can solder the wire that goes to the motor controller directly into the box but I feel that I want the other 2 to have some sort of connector.
Perhaps could just use pin headers and have some clamp screw down for strain relief?

https://img.incoherency.co.uk/6335

So that has the throttle output signal soldered directly to the board, and a 3x2 pin header for connecting to throttle pedal input and
gear position input. I don't know which is which but if I plug them in wrong I will quickly learn because the gear lever will operate the
throttle.

The pin order is VCC/Signal/GND.

And then it just wants a box to mount it all in, strain-relieve the cables, and fix to the chassis. Must retain access to USB port.
