# 2025-02-25

## FreeCAD

Regarding the timer warnings, hyarion suggests putting a breakpoint in the timer
functions (`QObject::startTimer` and `QBasicTimer::start`), to see what might be
causing the warning.

And the other thing is to try again to see if I can pass the GIL to the worker thread.

https://gist.github.com/jes/6a8b3dca8fce3e74f367ad37576792da this is the backtrace from the timer warning - it is quite deep, but the issue basically is that the QListWidgetItem::setHidden call in PartDesign should I think be done with invokeMethod if it's not running on the main thread - this could be very annoying, because I expect the same thing comes up in lots of places.

One option is we could "swap" the role of the worker thread and the abort dialog thread (i.e. make a new thread to run the abort dialog, and run the actual function on the main thread) - but then we lose the ability to force abort.

However currently force abort basically always segfaults freecad anyway so we're
not really losing all that much.

That would also make the GIL issue go away!

That's assuming it is actually possible to run the dialog on a non-main thread.

No, it's not possible.

New plan: run the abort dialog in a separate process and send a SIGHUP when cancelled.

Need to handle and ignore SIGPIPE; need to make `--computation-dialog` not have
a mandatory argument.

OK, well I have done that and I was quite happy with it, but it sounds like people in
Discord don't like it.

I've posted this comment and I'm stopping https://github.com/FreeCAD/FreeCAD/pull/19796#issuecomment-2682280027
