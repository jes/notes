# 2024-01-16

## pillbox incident

I woke up to find that email was not working. I logged into the recovery console and there were some errors about
network devices not being ready. I noticed that it shutdown unexpectedly at about 19:40 yesterday and came back at
about 21:04 yesterday. Why was it down for 1h25? I also noticed that the host key on the recovery console had
changed, which suggests it was migrated to a new VM host.

I texted support, rebooted the machine, eventually realised that actually networking
was fine (was it fine all along or did it only just start working?) and it was Docker that was broken.

Docker was getting errors like:

    overlayfs: unrecognized mount option "context="system_u:object_r:svirt_sandbox_file_t:s0:c177" or missing value

I don't know what the problem is.

I eventually solved it by wiping out `/var/lib/docker`, reinstalling Docker, and recreating everything with `docker-compose`.

My best guess is that the VM host had a failure, so the VM was migrated to a different host, and something about
`/var/lib/docker` didn't survive the migration.

I've sent a support ticket to find out what happened.
